<!-- TODO: Add instructions on building Dockerfile -->
# spark

Working repository for running spark TPCSDS benchmark on AKS

## Contents

| File/folder       | Description                                |
| ----------------- | ------------------------------------------ |
| `env`             | Terraform to build environment             |
| `kuberentes`      | Kubernetes manifests                       |
| `spark`           | Spark Docker containers and config         |
| `.gitignore`      | Define what to ignore at commit time.      |
| `CHANGELOG.md`    | List of changes to the sample.             |
| `CONTRIBUTING.md` | Guidelines for contributing to the sample. |

# Spark env Dockerfile
It is using the 
      Hadoop version 3.3.0 
      Spark Version 3.0.0

and setting the SPARK_HOME = '/opt/spark'.

It is adding SPARK_HOME to the PATH as well.

Dockerfile is to create a container for spark TPCDS. This container will install the necessary tools (tpcds-toolkit, databricks tpcds library, spark 3.0, sbt) to build an application that generate TPCDS data. This container will be used to execute a benchmark upon this data.

Dockerfile copies tpcds_jars to /opt/spark/jars in the container.

# Spark env lib folder
The folder also contains two jar files under tpcds_jars
      1. spark-sql=perf_2.12_latest.jar       : This jar file is compatible with version Spark 3.0.0
      2. tpcdsbenmark_2.12-0.1.0-SNAPSHOT.jar : 
                  The jar file is contains the wrapper class com.microsoftazure.aks.tpcds.TPCDSBenchmark. 
                  This class file is needed for the TPC-DS Execution. 


# Arguments for the com.microsoftazure.aks.tpcds.TPCDSBenchmark
tpcdsDataDir : Direcory for tpcsds-data. This data is generated by tpcds Data Generator class and stored in this location.
resultLocation : Output location for the TPCSDSBenchmark execution class.
format         : As of now we are supporting only parquet.
iterations     : Number of times we want to run the same query to see the average execution time for the query.
queryFilter    : We can specify the number of query we want TPCDSBenchmark to execute. The querynumbers can be given de
